#!/bin/sh
set -euf

##
# GPG generate key with our typical settings.
#
# This command prints our typical steps to set up a GPG key for an email address.
#
# We prefer a file name convention that uses the email address,
# an equal sign as a separator, and then an explanation:
#
#     alice@example.com=pgp-public-key-block.txt
#
#     alice@example.com=pgp-public-key-base64.txt
#
#     alice@example.com=pgp-public-key-base64-line.txt
#
#     alice@example.com=pgp-private-key-block.txt
#
#     alice@example.com=pgp-private-key-base64.txt
#
#     alice@example.com=pgp-private-key-base64-line.txt
#
# Contact: Joel Parker Henderson (joel@joelparkerhenderson.com)
# License: GPL
# Created: 2015-01-25
# Updated: 2020-03-23
##

email=${1-"alice@example.com"}

cat <<EOF

## How to create a key

Create a GPG key with our typical settings for OpenPGP:

    gpg --full-gen-key --openpgp

Choose RSA and RSA; this is typically the default.

Choose 4096 bits; this is typically the strongest.

Choose expiration date in one year; this is to be safe.

Choose a long complex password that you do not use elsewhere.

To list:

    gpg --list-key $email


## How to export

To export your public key using ASCII armor:

    gpg --export --armor $email

To export your public key using base64 encoding:

    gpg --export $email | base64

To export your public key using base64 encoding as one line:

    gpg --export $email | base64 | tr -d '[:space:]'

To export your private key using ASCII armor:

    gpg --export-secret-key --armor $email

To export your private key using base64 encoding:

    gpg --export-secret-key $email | base64

To export your private key using base64 encoding as one line:

    gpg --export-secret-key $email | base64 | tr -d '[:space:]'


## How to export with our file name conventions:

To export your public key and private key using our file name convention:

    gpg --export --armor $email > $email=pgp-public-key-block.txt

    gpg --export $email | base64 > $email=pgp-public-key-base64.txt

    gpg --export $email | base64 | tr -d '[:space:]' > $email=pgp-public-key-base64-line.txt

    gpg --export-secret-key --armor $email > $email=pgp-private-key-block.txt

    gpg --export-secret-key $email | base64 > $email=pgp-private-key-base64.txt

    gpg --export-secret-key $email | base64 | tr -d '[:space:]' > $email=pgp-private-key-base64-line.txt


## What's next

You can send your public key to anyone.

You must keep your private key secret.

EOF
